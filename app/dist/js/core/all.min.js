!function(){"use strict";angular.module("boilerplate",["ngRoute","ngResource","ui.bootstrap","AppConfig"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"app/views/home/_dashboard.html"}).when("/new",{templateUrl:"app/views/home/_new.html"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location",function(e,t){e.environment={debug:!1,appName:"Angular boilerplate",browser:navigator.appVersion,hostname:window.location.hostname,nav:[{name:"Test",uri:"#test"}]}}]),angular.module("AppConfig",[]).provider("AppConfig",function(){var e={headers:{headers:{Accept:"application/json"}}};return{set:function(t){e=t},$get:function(){return e}}})}(),function(){"use strict";angular.module("boilerplate").controller("AppMainController",["$rootScope","$scope","dataService","$location","$anchorScroll",function(e,t,n,r,a){function o(r){t.pageHeading="This is the first View",n.getData().then(function(r){e.data=n.filterByDate(r,2),t.restauraunts=n.transformRawRestaurantData(e.data)},function(e){})}o(),t.select=function(e){t.selectedRestaurant=e,a()}}])}(),function(){"use strict";angular.module("boilerplate").factory("dataService",["$q","$http","AppConfig",function(e,t,n){function r(){var n=e.defer(),r="https://data.cityofchicago.org/resource/cwig-ma7x.json";return t.get(r).then(function(e,t,r,a){n.resolve(e)},function(e,t,r,a){n.reject(t)}),n.promise}function a(e){var t=_.where(e,{facility_type:"Restaurant"}),n=_.where(t,{results:"Pass"}),r=_.where(t,{results:"Fail"}),a=_.countBy(t,"risk"),o=_.countBy(t,"zip"),i=_.map(a,function(e,t){return{name:t,count:e}}),s=_.countBy(_.where(t,{risk:i[0].name}),"zip"),u=_.countBy(_.where(t,{risk:i[1].name}),"zip"),c=_.countBy(_.where(t,{risk:i[2].name}),"zip"),p={entries:t,passingRestaurants:{entries:n,count:n.length},failRestaurants:{entries:r,count:r.length},localeInfo:{restaurantsByRiskType:i,restaurantsByZip:o,restaurantsByZipByHighRiskType:s,restaurantsByZipByMediumRiskType:u,restaurantsByZipByLowRiskType:c}};return p}function o(e,t){var n=[],r=Math.round(t);return 0==r&&(r=1),_.each(e,function(e){e.inspection_date&&moment().subtract(r,"years").isBefore(e.inspection_date)&&n.push(e)}),n}return{getData:r,transformRawRestaurantData:a,filterByDate:o}}])}();